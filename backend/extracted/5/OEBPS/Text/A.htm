<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xml:lang="en"
      lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<title>TensorFlow in Action</title>
<link rel="stylesheet" type="text/css" href="../../override_v1.css"/>
<link rel="stylesheet" type="text/css" href="../../stylesheet.css"/><link rel="stylesheet" type="text/css" href="../../page_styles.css"/>
</head>
<body>
<div id="book-content">
<div id="sbo-rt-content" class="calibre"><h1 class="tochead"><a id="pgfId-1048368"></a>appendix A Setting up the environment</h1>

  <p class="body"><a class="calibre8" id="pgfId-1048375"></a>In this appendix, you<a class="calibre8" id="marker-1048369"></a> will configure the development <a class="calibre8" id="marker-1048372"></a>and runtime environments on your computer. Two installation procedures are given: one for the Unix-based environments and one for Windows environments. Note that we will keep our Unix environment discussion focused mostly on Ubuntu and not MacOS. This is because, for machine learning and deep learning, Ubuntu is more popular and better supported than MacOS. However, we will list the resources you need to run this on MacOS.</p>

  <h2 class="fm-head" id="sigil_toc_id_209"><a id="pgfId-1048377"></a>A.1 In a Unix-based environment</h2>

  <p class="body"><a class="calibre8" id="pgfId-1048380"></a>Our<a class="calibre8" id="marker-1048378"></a><a class="calibre8" id="marker-1048379"></a> discussion will be split into three sections. In the first section, we will discuss setting up a virtual Python environment to install the required libraries to run the code. Next, we will discuss things needed for GPU support. Finally, we will discuss doing the same on MacOS.</p>

  <h3 class="fm-head1" id="sigil_toc_id_210"><a id="pgfId-1048383"></a>A.1.1 Creating a virtual Python environment with Anaconda distribution (Ubuntu)</h3>

  <p class="body"><a class="calibre8" id="pgfId-1048390"></a>In<a class="calibre8" id="marker-1048384"></a><a class="calibre8" id="marker-1048385"></a><a class="calibre8" id="marker-1048386"></a><a class="calibre8" id="marker-1048387"></a><a class="calibre8" id="marker-1048388"></a><a class="calibre8" id="marker-1048389"></a> this section, we will discuss the steps for setting up a conda environment (a term used to describe virtual Python environments created via the Anaconda software package) in Ubuntu:</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048392"></a>Install Anaconda on your Linux system (<span class="fm-hyperlink"><a class="url" href="https://docs.anaconda.com/anaconda/install/linux/">https://docs.anaconda.com/anaconda/install/linux/</a></span>).</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048394"></a>Open a terminal and open the <span class="fm-code-in-text">~/.bashrc</span> file with your favourite text editor (e.g., for vim, type <span class="fm-code-in-text">vim ~/.bashrc</span>).</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048395"></a>Add the following lines to the end of the file (with the placeholder filled with your path):</p>
      <pre class="programlisting">if ! [[ "$PATH" == *"anaconda3"* ]]; then
  export PATH=${PATH}:&lt;your anaconda3 installation path&gt;/bin
fi</pre>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048399"></a>Save and close the editor.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048400"></a>Open a new command line terminal.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048401"></a>Set up a new conda virtual environment by running <span class="fm-code-in-text">conda create -n manning.tf2 python=3.9</span>.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048402"></a>(Recommended) Create a folder named code in your home folder, where you will store code locally, and go into the folder using <span class="fm-code-in-text">cd~/code</span>.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048404"></a>Clone the code repository hosted on Github using <span class="fm-code-in-text">git clone https://github.com/thushv89/manning_tf2_in_action.git</span>. Make sure you have Git installed on your operating system.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048405"></a>Move <span class="fm-code-in-text">cd</span> into the cloned code repository with <span class="fm-code-in-text">cd manning_tf2_in_action</span>.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048406"></a>Activate the environment with</p>

      <ol class="calibre22">
        <li class="fm-sidebar-bullet-sub">
          <p class="list"><a class="calibre8" id="pgfId-1048407"></a>Anaconda &lt; 4.4: <span class="fm-code-in-text">source activate manning.tf2</span></p>
        </li>

        <li class="fm-sidebar-bullet-sub">
          <p class="list"><a class="calibre8" id="pgfId-1048408"></a>Anaconda &gt;= 4.4: <span class="fm-code-in-text">conda activate manning.tf2</span></p>
        </li>
      </ol>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048415"></a>Install the required libraries using<a class="calibre8" id="marker-1048409"></a><a class="calibre8" id="marker-1048410"></a><a class="calibre8" id="marker-1048411"></a><a class="calibre8" id="marker-1048412"></a><a class="calibre8" id="marker-1048413"></a><a class="calibre8" id="marker-1048414"></a> <span class="fm-code-in-text">pip install -r requirements.txt</span>.</p>
    </li>
  </ol>

  <h3 class="fm-head1" id="sigil_toc_id_211"><a id="pgfId-1048416"></a>A.1.2 Prerequisites for GPU support (Ubuntu)</h3>

  <p class="fm-head2"><a id="pgfId-1048417"></a>Installing the NVIDIA driver</p>

  <p class="body"><a class="calibre8" id="pgfId-1048421"></a>Make<a class="calibre8" id="marker-1048418"></a><a class="calibre8" id="marker-1048419"></a><a class="calibre8" id="marker-1048420"></a> sure you have installed the latest NVIDIA graphics driver for your GPU. You can find the driver installers at <span class="fm-hyperlink"><a class="url" href="https://www.nvidia.com/download/index.aspx?lang=en-us">http://mng.bz/xnKe</a></span>. You may run into problems with the subsequent steps of getting GPU support for TensorFlow if you don’t install the latest<a class="calibre8" id="marker-1048424"></a><a class="calibre8" id="marker-1048425"></a><a class="calibre8" id="marker-1048426"></a> drivers.</p>

  <p class="fm-head2"><a id="pgfId-1048427"></a>Installing CUDA</p>

  <p class="body"><a class="calibre8" id="pgfId-1048431"></a>In<a class="calibre8" id="marker-1048428"></a><a class="calibre8" id="marker-1048429"></a><a class="calibre8" id="marker-1048430"></a> this section, we will install CUDA 11.2, as we are using a TensorFlow version higher than 2.5.0. However, you need to pick the right CUDA version suitable for your TensorFlow version, as specified at <span class="fm-hyperlink"><a class="url" href="https://www.tensorflow.org/install/source#gpu">https://www.tensorflow.org/install/source#gpu</a></span>. The CUDA versions for the most recent TensorFlow versions are listed in table A.1.</p>

  <p class="fm-table-caption"><a id="pgfId-1049733"></a>Table A.1 CUDA versions supported by latest TensorFlow versions</p>

  <table border="1" class="contenttable" width="100%">
    <colgroup class="calibre12">
      <col class="calibre13" span="1" width="50%"/>
      <col class="calibre13" span="1" width="50%"/>
    </colgroup>

    <tr class="calibre14">
      <th class="fm-contenttable1" colspan="1" rowspan="1">
        <p class="fm-table-head"><a id="pgfId-1049737"></a><b class="fm-bold">TensorFlow version</b></p>
      </th>

      <th class="fm-contenttable1" colspan="1" rowspan="1">
        <p class="fm-table-head"><a id="pgfId-1049739"></a><b class="fm-bold">CUDA version</b></p>
      </th>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049741"></a>2.4.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049743"></a>11.0</p>
      </td>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049745"></a>2.8.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049747"></a>11.2</p>
      </td>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049749"></a>2.9.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049751"></a>11.2</p>
      </td>
    </tr>
  </table>

  <p class="body"><a class="calibre8" id="pgfId-1048457"></a>To install the desired CUDA version, complete the following steps:</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048458"></a>Go to the <span class="fm-hyperlink"><a class="url" href="https://developer.nvidia.com/cuda-toolkit-archive">https://developer.nvidia.com/cuda-toolkit-archive</a></span> page. This will show you all the available versions of CUDA that you can download.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048459"></a>Go to the desired CUDA version by clicking on it, and you will be shown a page like the one in figure A.1. For example, figure A.1 depicts the options for downloading CUDA version 11.7 for the Ubuntu distribution.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048460"></a>Make sure you have execution rights for the downloaded file (e.g., on Ubuntu, you can run <span class="fm-code-in-text">chmod a+x &lt;path to the downloaded file&gt;</span> through the terminal to provide execution privileges).</p>
    </li>

    <li class="fm-list-bullet-last">
      <p class="list"><a class="calibre8" id="pgfId-1048461"></a>Install the downloaded package by opening it through the command line terminal (e.g., on Ubuntu, simply go to the download directory and run the installation with <span class="fm-code-in-text">./&lt;file name&gt;</span>).</p>
    </li>
  </ol>

  <p class="fm-figure"><img alt="A-1" class="calibre10" src="../../OEBPS/Images/A-1.png" width="1133" height="956"/><br class="calibre2"/></p>

  <p class="fm-figure-caption"><a id="pgfId-1053320"></a>Figure A.1 CUDA download page (Ubuntu installation)</p>

  <p class="body"><a class="calibre8" id="pgfId-1048468"></a>Once the installation is complete, the installation path needs to be added to a special environment variable:</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048469"></a>Open a terminal, and open the <span class="fm-code-in-text">~/.bashrc</span> file with your favorite text editor (e.g., for vim, type <span class="fm-code-in-text">vim~/.bashrc</span>).</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048470"></a>Add the following lines to the end of the file. For example, the path might look like <span class="fm-code-in-text">/usr/local/cuda-11.0</span>:</p>
      <pre class="programlisting">if ! [[ "$PATH" == *"cuda"* ]]; then
  export PATH=${PATH}:&lt;path to CUDA&gt;/bin
fi
 
export LD_LIBRARY_PATH=&lt;path to CUDA&gt;/lib64</pre>
    </li>

    <li class="fm-list-bullet-last">
      <p class="list"><a class="calibre8" id="pgfId-1048479"></a>Save and close the<a class="calibre8" id="marker-1048476"></a><a class="calibre8" id="marker-1048477"></a><a class="calibre8" id="marker-1048478"></a> editor.</p>
    </li>
  </ol>

  <p class="fm-head2"><a id="pgfId-1048480"></a>Installing CuDNN</p>

  <p class="body"><a class="calibre8" id="pgfId-1048484"></a>Similar<a class="calibre8" id="marker-1049842"></a><a class="calibre8" id="marker-1049843"></a><a class="calibre8" id="marker-1049844"></a> to CUDA, the cuDNN version needs to be picked carefully. Table A.2 lists the cuDNN versions supported by the latest TensorFlow versions. To get the full list, visit<a class="calibre8" id="marker-1049846"></a><a class="calibre8" id="marker-1049847"></a><a class="calibre8" id="marker-1049848"></a> <span class="fm-hyperlink"><a class="url" href="https://www.tensorflow.org/install/source#gpu">https://www.tensorflow.org/install/source#gpu</a></span>.</p>

  <p class="fm-table-caption"><a id="pgfId-1049801"></a>Table A.2 cuDNN versions supported by the latest TensorFlow versions</p>

  <table border="1" class="contenttable" width="100%">
    <colgroup class="calibre12">
      <col class="calibre13" span="1" width="50%"/>
      <col class="calibre13" span="1" width="50%"/>
    </colgroup>

    <tr class="calibre14">
      <th class="fm-contenttable1" colspan="1" rowspan="1">
        <p class="fm-table-head"><a id="pgfId-1049805"></a><b class="fm-bold">TensorFlow version</b></p>
      </th>

      <th class="fm-contenttable1" colspan="1" rowspan="1">
        <p class="fm-table-head"><a id="pgfId-1049807"></a><b class="fm-bold">cuDNN version</b></p>
      </th>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049809"></a>2.4.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049811"></a>8.0</p>
      </td>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049813"></a>2.6.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049815"></a>8.1</p>
      </td>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1052872"></a>2.9.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049819"></a>8.1</p>
      </td>
    </tr>
  </table>

  <p class="body"><a class="calibre8" id="pgfId-1048511"></a>First, download the preferred cuDNN package by following the instructions and prompts at <span class="fm-hyperlink"><a class="url" href="https://developer.nvidia.com/cudnn">https://developer.nvidia.com/cudnn</a></span>. To install cuDNN, follow the instructions provided<a class="calibre8" id="marker-1048512"></a><a class="calibre8" id="marker-1048514"></a><a class="calibre8" id="marker-1048516"></a> at <span class="fm-hyperlink"><a class="url" href="http://mng.bz/AyQK">http://mng.bz/AyQK</a></span>.</p>

  <h3 class="fm-head1" id="sigil_toc_id_212"><a id="pgfId-1048521"></a>A.1.3 Notes on MacOS</h3>

  <p class="body"><a class="calibre8" id="pgfId-1048525"></a>Unfortunately<a class="calibre8" id="marker-1048522"></a><a class="calibre8" id="marker-1048523"></a><a class="calibre8" id="marker-1048524"></a>, CUDA is no longer actively supported by NVIDIA, as it is not recognized as a dominant development environment for CUDA-related development work (<span class="fm-hyperlink"><a class="url" href="http://mng.bz/ZAlO">http://mng.bz/ZAlO</a></span>). You can still install Anaconda, create a virtual environment, and install TensorFlow to carry development work. However, you might not be able to run any TensorFlow computations (that execute CUDA implementations underneath) on your NVIDIA GPU (if one exists).</p>

  <p class="body"><a class="calibre8" id="pgfId-1048526"></a>To install Anaconda on MacOS, follow the guide provided at <span class="fm-hyperlink"><a class="url" href="https://docs.anaconda.com/anaconda/install/mac-os/">https://docs.anaconda.com/anaconda/install/mac-os/</a></span>. The guide for managing conda environments is provided<a class="calibre8" id="marker-1048527"></a><a class="calibre8" id="marker-1048528"></a><a class="calibre8" id="marker-1048529"></a> at<a class="calibre8" id="marker-1048530"></a><a class="calibre8" id="marker-1048531"></a> <span class="fm-hyperlink"><a class="url" href="http://mng.bz/R4V0">http://mng.bz/R4V0</a></span>.</p>

  <h2 class="fm-head" id="sigil_toc_id_213"><a id="pgfId-1048532"></a>A.2 In Windows Environments</h2>

  <p class="body"><a class="calibre8" id="pgfId-1048535"></a>In<a class="calibre8" id="marker-1052184"></a><a class="calibre8" id="marker-1052185"></a> this section, we will discuss how to install a virtual environment with Windows and ensure GPU support.</p>

  <h3 class="fm-head1" id="sigil_toc_id_214"><a id="pgfId-1048536"></a>A.2.1 Creating a Virtual Python Environment (Anaconda)</h3>

  <p class="body"><a class="calibre8" id="pgfId-1048541"></a>This<a class="calibre8" id="marker-1048537"></a><a class="calibre8" id="marker-1048538"></a><a class="calibre8" id="marker-1048539"></a><a class="calibre8" id="marker-1048540"></a> section discusses the steps to create a conda environment on a Windows host:</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048542"></a>Install Anaconda on your Windows system (<span class="fm-hyperlink"><a class="url" href="https://docs.anaconda.com/anaconda/install/linux/">https://docs.anaconda.com/anaconda/install/linux/</a></span>), which will also install a CLI (command line interface<a class="calibre8" id="marker-1048543"></a>) for executing Anaconda-specific commands.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048544"></a>Open the Anaconda Prompt by typing Anaconda Prompt in the search bar of the start menu (figure A.2).</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048545"></a>In the terminal, run <span class="fm-code-in-text">conda create -n manning.tf2 python=3.9</span> to set up a conda virtual environment.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048546"></a>(Recommended) Create a folder named code in your home folder (e.g., <span class="fm-code-in-text">C:\Users\&lt;username&gt;\Documents</span>), where we will store code locally and go into the folder using <span class="fm-code-in-text">cd C:\Users\&lt;username&gt;\Documents</span>.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048547"></a>If not already installed, install Git for Windows (e.g., <span class="fm-hyperlink"><a class="url" href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></span>).</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048548"></a>Clone the code repository hosted on Github using <span class="fm-code-in-text">git clone https://github.com/thushv89/manning_tf2_in_action.git</span>.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048549"></a>Move <span class="fm-code-in-text">cd</span> into the cloned code repository with <span class="fm-code-in-text">cd manning_tf2_in_action</span>.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048550"></a>Activate the environment with <span class="fm-code-in-text">conda activate manning.tf2</span>.</p>
    </li>

    <li class="fm-list-bullet-last">
      <p class="list"><a class="calibre8" id="pgfId-1048555"></a>Install the required libraries using<a class="calibre8" id="marker-1048551"></a><a class="calibre8" id="marker-1048552"></a><a class="calibre8" id="marker-1048553"></a><a class="calibre8" id="marker-1048554"></a> <span class="fm-code-in-text">pip install -r requirements.txt</span>.</p>
    </li>
  </ol>

  <p class="fm-figure"><img alt="A-2" class="calibre10" src="../../OEBPS/Images/A-2.png" width="900" height="613"/><br class="calibre2"/></p>

  <p class="fm-figure-caption"><a id="pgfId-1053354"></a>Figure A.2 Opening the Anaconda Prompt on Windows</p>

  <h3 class="fm-head1" id="sigil_toc_id_215"><a id="pgfId-1048562"></a>A.2.2 Prerequisites for GPU support</h3>

  <p class="body"><a class="calibre8" id="pgfId-1048565"></a>In<a class="calibre8" id="marker-1048563"></a><a class="calibre8" id="marker-1048564"></a> this section, we will discuss several prerequisites to make sure the GPU is recognized and working as expected.</p>

  <p class="fm-head2"><a id="pgfId-1048566"></a>Installing the NVIDIA driver</p>

  <p class="body"><a class="calibre8" id="pgfId-1048569"></a>Make<a class="calibre8" id="marker-1048567"></a><a class="calibre8" id="marker-1048568"></a> sure you have installed the latest NVIDIA graphics driver for your GPU. You can find the driver installers at <span class="fm-hyperlink"><a class="url" href="http://mng.bz/xnKe">http://mng.bz/xnKe</a></span>. If you don’t install the latest drivers, you could run into problems with the subsequent steps of getting GPU support for<a class="calibre8" id="marker-1048570"></a><a class="calibre8" id="marker-1048571"></a> TensorFlow.</p>

  <p class="fm-head2"><a id="pgfId-1048572"></a>Installing CUDA</p>

  <p class="body"><a class="calibre8" id="pgfId-1048575"></a>In<a class="calibre8" id="marker-1048573"></a><a class="calibre8" id="marker-1048574"></a> this section, we will install CUDA 11.2, as we are using a TensorFlow version higher than 2.5.0. However, you need to pick the right CUDA version suitable for your TensorFlow version, as specified at <span class="fm-hyperlink"><a class="url" href="https://www.tensorflow.org/install/source#gpu">https://www.tensorflow.org/install/source#gpu</a></span>.</p>

  <p class="body"><a class="calibre8" id="pgfId-1048579"></a>To install the desired CUDA version, complete the following steps:</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048580"></a>Go to the <span class="fm-hyperlink"><a class="url" href="https://developer.nvidia.com/cuda-toolkit-archive">https://developer.nvidia.com/cuda-toolkit-archive</a></span> page. This will show you all the available versions of CUDA that you can download.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048581"></a>Go to the desired CUDA version by clicking on it, and you will be shown a page like figure A.3. For example, figure A.3 depicts the options that would be chosen to fetch CUDA 11.7 for the Windows operating system.</p>
    </li>

    <li class="fm-list-bullet-last">
      <p class="list"><a class="calibre8" id="pgfId-1048582"></a>Run the downloaded <span class="fm-code-in-text">.exe</span> as the administrator and follow the prompts.</p>
    </li>
  </ol>

  <p class="fm-figure"><img alt="A-3" class="calibre10" src="../../OEBPS/Images/A-3.png" width="1133" height="816"/><br class="calibre2"/></p>

  <p class="fm-figure-caption"><a id="pgfId-1053408"></a>Figure A.3 CUDA download page (Windows installation)</p>

  <p class="body"><a class="calibre8" id="pgfId-1048589"></a>Once the installation is complete, the installation path needs to be added to a special environment variable:</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048592"></a>Open the Environment variables window by selecting “Edit the system environment variable” from the start menu (figure A.4).</p>
    </li>

    <li class="fm-list-bullet-last">
      <p class="list"><a class="calibre8" id="pgfId-1048593"></a>Add the following paths to the path variables, as outlined in table A.3. Figure A.5 shows how environment variables can be added/modified on Windows.</p>
    </li>
  </ol>

  <p class="fm-figure"><img alt="A-4" class="calibre10" src="../../OEBPS/Images/A-4.png" width="900" height="605"/><br class="calibre2"/></p>

  <p class="fm-figure-caption"><a id="pgfId-1053468"></a>Figure A.4 Opening the system properties window</p>

  <p class="fm-table-caption"><a id="pgfId-1049909"></a>Table A.3 The path variables that need to be added and modified</p>

  <table border="1" class="contenttable" width="100%">
    <colgroup class="calibre12">
      <col class="calibre13" span="1" width="50%"/>
      <col class="calibre13" span="1" width="50%"/>
    </colgroup>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1048598"></a>PATH</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1048600"></a>&lt;path to your CUDA installation&gt;\bin</p>
      </td>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1048602"></a>CUDA_PATH</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1048604"></a>&lt;path to your CUDA installation&gt;</p>
      </td>
    </tr>
  </table>

  <p class="fm-figure"><img alt="A-5" class="calibre10" src="../../OEBPS/Images/A-5.png" width="1003" height="572"/><br class="calibre2"/></p>

  <p class="fm-figure-caption"><a id="pgfId-1053498"></a>Figure A.5 Steps to follow in order to add/modify a path variable</p>

  <p class="fm-head2"><a id="pgfId-1048618"></a>Installing CuDNN</p>

  <p class="body"><a class="calibre8" id="pgfId-1048621"></a>Similar<a class="calibre8" id="marker-1048619"></a><a class="calibre8" id="marker-1048620"></a> to CUDA<a class="calibre8" id="marker-1053041"></a><a class="calibre8" id="marker-1052937"></a>, the cuDNN version needs to be picked carefully. Table A.4 lists the cuDNN versions supported by the latest TensorFlow versions. To get the full list, visit <span class="fm-hyperlink"><a class="url" href="https://www.tensorflow.org/install/source#gpu">https://www.tensorflow.org/install/source#gpu</a></span>.</p>

  <p class="fm-table-caption"><a id="pgfId-1049958"></a>Table A.4 cuDNN versions supported by the latest TensorFlow versions</p>

  <table border="1" class="contenttable" width="100%">
    <colgroup class="calibre12">
      <col class="calibre13" span="1" width="50%"/>
      <col class="calibre13" span="1" width="50%"/>
    </colgroup>

    <tr class="calibre14">
      <th class="fm-contenttable1" colspan="1" rowspan="1">
        <p class="fm-table-head"><a id="pgfId-1049962"></a><b class="fm-bold">TensorFlow version</b></p>
      </th>

      <th class="fm-contenttable1" colspan="1" rowspan="1">
        <p class="fm-table-head"><a id="pgfId-1049964"></a><b class="fm-bold">cuDNN version</b></p>
      </th>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049966"></a>2.4.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049968"></a>8.1</p>
      </td>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049970"></a>2.5.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049972"></a>8.1</p>
      </td>
    </tr>

    <tr class="calibre14">
      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049974"></a>2.6.x</p>
      </td>

      <td class="fm-contenttable2" colspan="1" rowspan="1">
        <p class="fm-table-body"><a id="pgfId-1049976"></a>8.0</p>
      </td>
    </tr>
  </table>

  <p class="body"><a class="calibre8" id="pgfId-1048645"></a>First, download the preferred cuDNN package following the instructions and prompts at <span class="fm-hyperlink"><a class="url" href="https://developer.nvidia.com/cudnn">https://developer.nvidia.com/cudnn</a></span>. To install cuDNN, follow the instructions<a class="calibre8" id="marker-1048646"></a><a class="calibre8" id="marker-1048647"></a> provided<a class="calibre8" id="marker-1048648"></a><a class="calibre8" id="marker-1048649"></a> at<a class="calibre8" id="marker-1048650"></a><a class="calibre8" id="marker-1048651"></a> <span class="fm-hyperlink"><a class="url" href="http://mng.bz/AyQK">http://mng.bz/AyQK</a></span>.</p>

  <h2 class="fm-head" id="sigil_toc_id_216"><a id="pgfId-1048652"></a>A.3 Activating and deactivating the conda environment</h2>

  <p class="body"><a class="calibre8" id="pgfId-1048653"></a>Once the conda environment is created, complete the following steps to activate or deactivate the environment<a class="calibre8" id="marker-1052964"></a>.</p>

  <p class="body"><a class="calibre8" id="pgfId-1048654"></a>On Windows (through the Anaconda Prompt) (figure A.6)</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048655"></a>Run <span class="fm-code-in-text">conda activate &lt;environment name&gt;</span> to activate the environment.</p>
    </li>

    <li class="fm-list-bullet-last">
      <p class="list"><a class="calibre8" id="pgfId-1048656"></a>Run <span class="fm-code-in-text">conda deactivate</span> to deactivate the currently active environment.</p>
    </li>
  </ol>

  <p class="fm-figure"><img alt="A-6" class="calibre10" src="../../OEBPS/Images/A-6.png" width="1025" height="272"/><br class="calibre2"/></p>

  <p class="fm-figure-caption"><a id="pgfId-1053530"></a>Figure A.6 Activating a conda environment<a id="marker-1048694"></a></p>

  <p class="body"><a class="calibre8" id="pgfId-1048657"></a>On Ubuntu (through the terminal)</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048658"></a>Run <span class="fm-code-in-text">source activate &lt;environment name&gt;</span> (Anaconda &lt; 4.4) or <span class="fm-code-in-text">conda activate &lt;environment name&gt;</span> (Anaconda &gt;= 4.4) to activate the environment.</p>
    </li>

    <li class="fm-list-bullet-last">
      <p class="list"><a class="calibre8" id="pgfId-1048661"></a>Run <span class="fm-code-in-text">conda deactivate</span> to deactivate the currently active<a class="calibre8" id="marker-1048659"></a><a class="calibre8" id="marker-1048660"></a> environment.</p>
    </li>
  </ol>

  <div class="calibre3" id="calibre_pb_0"></div>


<div class="calibre3" id="calibre_pb_0_1"></div>

  <div class="calibre2" id="calibre_pb_0_2"></div>

  <div class="calibre2" id="calibre_pb_0_3"></div><div class="calibre15" id="calibre_pb_0_4"></div><h2 class="fm-head" id="sigil_toc_id_217"><a id="pgfId-1048668"></a>A.4 Running the Jupyter Notebook server and creating notebooks</h2>

  <p class="body"><a class="calibre8" id="pgfId-1048671"></a>We<a class="calibre8" id="marker-1048669"></a><a class="calibre8" id="marker-1048670"></a> will be writing code and executing it using a Jupyter Notebook server. Specifically, we will start the Jupyter Notebook server, which will provide you a dashboard (a webpage) to create Jupyter Notebooks. The Jupyter Notebook is an interactive Python runtime environment. This means you can write code in the Jupyter Notebooks and run different code snippets on demand. This is because code can be separated into what are known as <i class="fm-italics">notebook cells</i>. Let’s see how we can start a Jupyter Notebook server and start coding:</p>

  <ol class="calibre11">
    <li class="fm-list-bullet">
      <p class="list"><a class="calibre8" id="pgfId-1048672"></a>Open the command line terminal (e.g., Ubuntu terminal or the Windows Anaconda Prompt), and activate the virtual environment <span class="fm-code-in-text">manning.tf2</span> if you haven’t already.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048673"></a>Go into the directory you downloaded code to using <span class="fm-code-in-text">cd</span> in the CLI (e.g., <span class="fm-code-in-text">cd C:\Users\&lt;user&gt;\Documents\code\manning_tf2_in_action</span>).</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048674"></a>Run the command <span class="fm-code-in-text">jupyter notebook</span> in the CLI.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048675"></a>This should open the Jupyter Notebook server’s landing page on your default browser.</p>
    </li>

    <li class="fm-list-bullet1">
      <p class="list"><a class="calibre8" id="pgfId-1048676"></a>Now you can navigate the folder structure within that directory, open any notebook, and run it (figure A.7).</p>
    </li>

    <li class="fm-list-bullet-last">
      <p class="list"><a class="calibre8" id="pgfId-1048677"></a>Once a notebook is opened, you have the ability to do various things, such as creating code cells, running code cells, and so on<a class="calibre8" id="marker-1053295"></a><a class="calibre8" id="marker-1053296"></a> (figure A.8).</p>
    </li>
  </ol>

  <p class="fm-figure"><img alt="A-7" class="calibre10" src="../../OEBPS/Images/A-7.png" width="1133" height="610"/><br class="calibre2"/></p>

  <p class="fm-figure-caption"><a id="pgfId-1053564"></a>Figure A.7 The landing page created by the Jupyter Notebook server</p>

  <p class="fm-figure"><img alt="A-8" class="calibre10" src="../../OEBPS/Images/A-8.png" width="1103" height="744"/><br class="calibre2"/></p>

  <p class="fm-figure-caption"><a id="pgfId-1053596"></a>Figure A.8 An overview of a Jupyter Notebook</p>

  <h2 class="fm-head" id="sigil_toc_id_218"><a id="pgfId-1048692"></a>A.5 Miscellaneous notes</h2>

  <p class="body"><a class="calibre8" id="pgfId-1048693"></a>To make the plotting capability provided in TensorFlow/Keras work, you installed a Python package called <span class="fm-code-in-text">graphviz</span>. You might need to append the path to this library (e.g., <span class="fm-code-in-text">&lt;path to Anaconda&gt;\envs\manning.tf2\Library\bin\graphviz</span> if you used Anaconda installation) to the PATH variable of your operating<a class="calibre8" id="marker-1053305"></a> system.</p>
</div>
</div>
</body>
</html>